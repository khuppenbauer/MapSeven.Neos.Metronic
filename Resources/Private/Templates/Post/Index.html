{namespace snippets=Flowpack\Snippets\ViewHelpers}
<snippets:security.ifAuthenticated providerName="FrontendProvider">
    <f:then>
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption">
                    My Snippets
                </div>
            </div>
            <div class="portlet-body">
                <f:if condition="{posts}">
                    <f:then>
                        <table class="table table-striped table-hover table-bordered" id="my-snippets">
                            <thead>
                                <tr>
                                    <th><f:translate id="title">Title</f:translate></th>
                                    <th><f:translate id="category">Category</f:translate></th>
                                    <th><f:translate id="tags">Tags</f:translate></th>
                                    <th><f:translate id="date">Date</f:translate></th>
                                    <th><f:translate id="views">Views</f:translate></th>
                                    <th><f:translate id="votes">Votes</f:translate></th>
                                    <th><f:translate id="favorites">Favorites</f:translate></th>
                                    <th><f:translate id="comments">Comments</f:translate></th>
                                    <th><f:translate id="postType">Type</f:translate></th>
                                    <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                <f:for each="{posts}" key="flowidentifier" as="post">
                                <tr>
                                    <td><f:link.action action="show" arguments="{post: post}">{post.title}</f:link.action></td>
                                    <td>{post.category}</td>
                                    <td>
                                        <f:for each="{post.tags}" as="tag" iteration="iterator">
                                            {tag.name}{f:if(condition:iterator.isLast, then: '', else: ',')}
                                        </f:for>
                                    </td>
                                    <td><f:translate id="post.date" arguments="{0: post.date}"><![CDATA[{0,datetime}]]</f:translate></td>
                                    <td>{post.numberOfViews}</td>
                                    <td>{post.numberOfVotes}</td>
                                    <td>{post.numberOfFavorites}</td>
                                    <td>{post.numberOfComments}</td>
                                    <td>{post.postType}</td>
                                    <td>
                                        <f:link.action action="show" arguments="{post: post}"><i class="fa fa-eye fa-fw"></i></f:link.action>
                                        <f:link.action action="edit" arguments="{post: post}"><i class="fa fa-pencil fa-fw"></i></f:link.action>
                                        <a href="#" data-reveal-id="Modal{flowidentifier}"><i class="fa fa-trash-o fa-fw"></i></a>

                                    </td>
                                </tr>
                                </f:for>
                            </tbody>
                        </table>
                        <script type="text/javascript">
                            $(document).ready(function(){
                                $('#my-snippets').DataTable();
                            });
                        </script>
                    </f:then>
                    <f:else>
                        <p><f:translate id="search.noPosts">no Posts found</f:translate></p>
                    </f:else>
                </f:if>
            </div>
        </div>
    </f:then>
    <f:else>
        <f:render partial="FlashMessages" />
        <f:render partial="Login" />
    </f:else>
</snippets:security.ifAuthenticated>